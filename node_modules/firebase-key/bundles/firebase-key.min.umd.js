/*MIT license https://github.com/cartant/firebase-key/blob/master/LICENSE*/
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(e.firebaseKey={})}(this,function(e){"use strict";var r="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";function t(e){for(var t=0,n=0;n<8;++n){var a=r.indexOf(e.charAt(n));if(-1===a)throw new Error("Unexpected character '"+e.charAt(n)+"'.");t=64*t+a}return t}function n(e,r){var t="";if("function"==typeof e.repeat)t=e.repeat(r);else if(r>0){for(;r>1;)1&r&&(t+=e),r>>=1,e+=e;t+=e}return t}var a=0;e.date=function(e){return new Date(t(e))},e.decode=function(e){return e.replace(/!([0-9a-f]{2})/gi,function(e,r){return String.fromCharCode(parseInt(r,16))})},e.decodeLexicographic=function(e){var t=0;if(e.charAt(0)>"_")for(var n=1;n<e.length;n++)t*=r.length,t+=r.indexOf(e.charAt(n));else{for(n=1;n<e.length;n++)t*=r.length,t+=r.length-1-r.indexOf(e.charAt(n));t=-t}return t},e.decrement=function(e){return e.replace(/[^-]-*$/,function(e){var t=r.indexOf(e.charAt(0));if(-1===t)throw new Error("Unexpected character '"+e.charAt(0)+"'.");return r.charAt(t-1)+n("z",e.length-1)})},e.encode=function(e){return e.replace(/[\/\.\$\[\]#!]/g,function(e){return"!"+e.charCodeAt(0).toString(16).toUpperCase()})},e.encodeLexicographic=function(e){var t="";if(0===e)t="a-";else if(e>0){for(;e>0;){var n=e%r.length;t=r.charAt(n)+t,e-=n,e/=r.length}t=r.charAt(t.length+37)+t}else{for(e=-e;e>0;)n=e%r.length,t=r.charAt(r.length-1-n)+t,e-=n,e/=r.length;t=r.charAt(37-t.length)+t}return t},e.increment=function(e){return e.replace(/[^z]z*$/,function(e){var t=r.indexOf(e.charAt(0));if(-1===t)throw new Error("Unexpected character '"+e.charAt(0)+"'.");return r.charAt(t+1)+n("-",e.length-1)})},e.key=function(e,t){void 0===e&&((e=Date.now())<=a&&(e=a+1),a=e),e instanceof Date&&(e=e.getTime());for(var n=new Array(9),c=7;c>=0;--c)n[c]=r.charAt(e%64),e=Math.floor(e/64);if(0!==e)throw new Error("Unexpected timestamp.");switch(t){case"max":n[8]="zzzzzzzzzzzz";break;case"min":n[8]="------------";break;default:n[8]=function(e,r){var t=[];for(r|=0;r;){var n=Math.random()*e.length|0;t.push(e.charAt(n)),r-=1}return t.join("")}(r,12)}return n.join("")},e.resetLastTimestamp=function(){a=0},e.milliseconds=t,Object.defineProperty(e,"__esModule",{value:!0})});