<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" ng-app="myApp" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en" ng-app="myApp" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" ng-app="myApp" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" ng-app="myApp" class="no-js"> <!--<![endif]-->
<html lang="en">
  	<head>
		<meta charset="utf-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>NumberPrime</title>
		<meta name="description" content="">
  		<meta name="viewport" content="width=device-width, initial-scale=1">
  		<link rel="stylesheet" href="bower_components/html5-boilerplate/dist/css/normalize.css">
  		<link rel="stylesheet" href="bower_components/html5-boilerplate/dist/css/main.css">
 		<link rel="stylesheet" href="app.css">
		  <script src="bower_components/html5-boilerplate/dist/js/vendor/modernizr-2.8.3.min.js"></script>
		  <script src="Classes.js" rel="import" type="text/javascript"></script>
  	</head>
	<body>

		<!-- <h1 style="text-align:center">Hello, <span id="clientName"></span></h1> -->
		<div ng-view></div>

		<script src="graphicsTown/Libraries/twgl-full.js"></script>
		<script src="graphicsTown/Libraries/panel.js"></script>
		<script src="graphicsTown/Libraries/arcball.js"></script>
		<script src="graphicsTown/grobject.js"></script>
		<script src="graphicsTown/Objects/problemSet.js"></script>
		<script src="graphicsTown/graphicstown.js"></script>
		<!-- In production use:
		<script src="//ajax.googleapis.com/ajax/libs/angularjs/x.x.x/angular.min.js"></script>
		-->
		<script src="bower_components/jquery/dist/jquery.js"></script>
		<script src="bower_components/angular/angular.js"></script>
		<script src="bower_components/angular-route/angular-route.js"></script>
		<script src="config.js"></script>
		<script src="app.js"></script>
		<script src="login/login.js"></script>
		<script src="view2/view2.js"></script>
		<script src="studentView/studentView.js"></script>
		<script src="teacherView/teacherView.js"></script>
		<script src="mathView/mathView.js"></script>
    <script src="settings/settings.js"></script>
    <script src="MeasurementView/measurement.js"></script>
    <script src="volumeView/volume.js"></script>
		<script src="components/version/version.js"></script>
		<script src="components/version/version-directive.js"></script>
		<script src="components/version/interpolate-filter.js"></script>
	</body>
		<script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
		<script>
		// Initialize Firebase
		var config = {
		  apiKey: "AIzaSyD9YOF7QtGca_WDqjhcZmsz2q2nxp4UXXM",
		  authDomain: "numberprime-b359d.firebaseapp.com",
		  databaseURL: "https://numberprime-b359d.firebaseio.com",
		  projectId: "numberprime-b359d",
		  storageBucket: "numberprime-b359d.appspot.com",
		  messagingSenderId: "820335136282"
		};
		firebase.initializeApp(config);
		
		function login() {
			function newLoginHappened(user) {
				if (user) {
					// User is signed in
					var names = user.displayName.split(" ");
					User.createUser(firebase, user.uid, names[0], names[1], user.email, new Date(), "student", {"classId": 1234, "gradeLevel" : 4}).then(
						function() {
							googleUser = user;
							alert("User added successfully to the database");
						},
						function(err) {

						}
					);
					app(user);
				} else {
					var provider = new firebase.auth.GoogleAuthProvider();
					firebase.auth().signInWithPopup(provider);
				}
			}
			firebase.auth().onAuthStateChanged(newLoginHappened);
		}

		function app(user) {
			// user.displayName
			// user.email
			// user.photoURL
			// user.uid
			document.getElementById("clientName").innerHTML = user.displayName;

		}

		//window.onload = login;
		$(document).ready(login);
	  </script>
	<script src="https://www.gstatic.com/firebasejs/4.11.0/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/4.11.0/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/4.11.0/firebase-database.js"></script>
	<script src="https://www.gstatic.com/firebasejs/4.11.0/firebase-firestore.js"></script>
  	<script src="https://www.gstatic.com/firebasejs/4.11.0/firebase-messaging.js"></script>
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

 	<!-- IMPORT FIREBASE SDK AND AUTO-CONFIGURE -->
  	<script src="/__/firebase/4.10.1/firebase-app.js"></script>
  	<script src="/__/firebase/4.10.1/firebase-auth.js"></script>
  	<script src="/__/firebase/4.10.1/firebase-database.js"></script>
  	<script src="/__/firebase/init.js"></script>
  	<script src="./auth.js"></script>
  	<!-- <script src="./userModel.js"></script> -->

	<script id="tex-vs" type="notjs">
	precision highp float;
	attribute vec3 aPosition;
	attribute vec2 aTexCoord;
	attribute vec2 aTexCoord2;
	attribute vec2 aTexCoord3;
	varying vec2 vTexCoord;
	varying vec2 vTexCoord2;
 	varying vec2 vTexCoord3;
	varying vec3 vColor;
	varying vec3 vPos;
	varying vec2 vBg;
	uniform mat4 view;
	uniform mat4 proj;
	uniform mat4 model;
	uniform vec3 offset;
	uniform vec3 color;
	uniform vec2 bgOff;
	void main(void) {
	vColor = color;
	vPos = aPosition;
	vTexCoord = aTexCoord+bgOff;
	vTexCoord3 = aTexCoord3;
	vTexCoord2.x = aTexCoord2.x + offset.x;
	vTexCoord2.y = aTexCoord2.y + offset.y;
	gl_Position = proj * view * model * vec4(aPosition, 1.0);
	}
	</script>
	<script id="tex-fs" type="notjs">
	precision highp float;
	varying vec2 vTexCoord;
	varying vec2 vTexCoord2;
	varying vec2 vTexCoord3;
	varying vec3 vColor;
	varying vec3 vPos;
	uniform sampler2D uTexture;
	void main(void) {
	vec4 clr = texture2D(uTexture,vTexCoord);
	vec4 clr2 = texture2D(uTexture,vTexCoord2);
	gl_FragColor = vec4(vColor,1.0)*(.5*clr + .5*clr2);
	}
	</script>
</html>
